var ElWordSelect=function(e,t,n,o){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o;var r=!("ontouchstart"in document.documentElement),i=["clientX","clientY","pageX","pageY","screenX","screenY","currentTarget"],s={mousedown:"vdown",mousemove:"vmove",mouseup:"vup",touchstart:"vdown",touchmove:"vmove",touchend:"vend"};function a(e,t,r){var a=e.data&&e.data.on||e.componentOptions&&e.componentOptions.listeners,l=function(e,t){var r=e;e.touches&&(r=e.touches[0]);var a=void 0===o(r.clientX)?{}:i.reduce(function(e,t){return Object.assign(e,n({},t,r[t]))},{});return a.type=s[e.type],a.target=t,a.nativeEvent=e,a.preventDefault=function(){return e.preventDefault()},a.stopPropagation=function(){return e.stopPropagation()},a}(r,e.elm);a&&a[t]&&a[t](l)}function l(e,t,n){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.map(function(e){return e.apply(void 0,n)})}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(o,!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var d={placement:"right-start",visibleArrow:!1,popperClass:"el-word-select-popper",popperOptions:{boundariesElement:"body",gpuAcceleration:!1}},f={popperClass:"el-word-select-popper",visibleArrow:!1,popperOptions:{boundariesElement:"body",gpuAcceleration:!1}},h={props:{showHandle:{type:Boolean,default:!0},showSuggest:{type:Boolean,default:!0},handlePopoverOptions:{type:Object,default:function(){return u({},d)}},suggestPopoverOptions:{type:Object,default:function(){return u({},f)}},autoClose:{type:Boolean,default:!0}},data:function(){return{isSelected:!1,offsetX:0,offsetY:0,selectionWidth:0,selectionHeight:0}},directives:{select:{bind:function(e,t,n){var o=l(document,"selectionchange",a.bind(null,n,"vselectchange"));if(r){var i=l(e,"mousedown",function(t){var o=l(document,"mousemove",a.bind(null,n,"vmove"));e._$vselectDiposer=c(s,o,l(document,"mouseup",function t(r){o(),a(n,"vup",r),document.removeEventListener("mouseup",t),e._$vselectDiposer=s})),a(n,"vdown",t)}),s=c(i,o);e._$vselectDiposer=s}else e._$vselectDiposer=c(o,l(e,"touchstart",a.bind(null,n,"vdown")),l(e,"touchmove",a.bind(null,n,"vmove")),l(e,"touchend",a.bind(null,n,"vup")))},unbind:function(e){e._$vselectDiposer&&e._$vselectDiposer()}}},watch:{autoClose:function(e){e&&this.maybeHidePoppper()}},computed:{popperStyle:function(){return{left:"".concat(this.offsetX,"px"),top:"".concat(this.offsetY,"px"),width:"".concat(this.selectionWidth,"px"),height:"".concat(this.selectionHeight,"px")}},mergedHandlePopoverOptions:function(){return this.mergePopoverOptions(d,this.handlePopoverOptions)},mergedSuggestPopoverOptions:function(){return this.mergePopoverOptions(f,this.suggestPopoverOptions)}},methods:{close:function(){this.isSelected=!1},updatePopperPosition:function(){this.$refs.handle&&this.$refs.handle.updatePopper(),this.$refs.suggest&&this.$refs.suggest.updatePopper()},getOffsetParent:function(){return this.$refs.selectWrapper.offsetParent||document.body},getRangeOffsetToParent:function(e){var t=e.getBoundingClientRect(),n=this.getOffsetParent().getBoundingClientRect();return[t.left-n.left,t.top-n.top]},handlePointerUp:function(e){var n=this,o=document.getSelection();if(o&&"Range"===o.type){var r=this.pruneRange(o.getRangeAt(0)),i=r.getBoundingClientRect(),s=(this.getOffsetParent().getBoundingClientRect(),this.getRangeOffsetToParent(r)),a=t(s,2),l=a[0],c=a[1];this.offsetX=l,this.offsetY=c,this.selectionWidth=i.width,this.selectionHeight=i.height,this.isSelected=!0,this.$emit("change",r.toString()),this.autoClose||this.$nextTick(function(){n.updatePopperPosition()})}else{if(!this.autoClose)return;this.close()}},handlePointerMove:function(){},handlePointerDown:function(e){this.autoClose&&(this.$emit("change",""),this.close())},pruneRange:function(e){var t=e.cloneRange(),n=t.startContainer,o=t.endContainer,r=this.$refs.selectWrapper,i=r.contains(n),s=r.contains(o);return(i||s)&&(i||t.setStart(r,0),s||t.setEnd(r,r.childNodes.length)),t},maybeHidePoppper:function(){this.autoClose&&this.isSelected&&!this.checkIsInSelection()&&this.close()},checkIsInSelection:function(){var e=document.getSelection();if(e&&"Range"===e.type){var t=e.getRangeAt(0),n=t.startContainer,o=t.endContainer,r=this.$refs.selectWrapper,i=n;do{if(r.contains(i))return t;i=this.getNextNode(n,!1,o)}while(i)}return null},getNextNode:function(e,t,n){return n==e?null:e.firstChild&&!t?e.firstChild:e.parentNode?e.nextSibling||this.getNextNode(e.parentNode,!0,n):null},mergePopoverOptions:function(e,t){if(t){var n=t.popperOptions?u({},e.popperOptions,{},t.popperOptions):e.popperOptions;return u({},e,{},t,{},{popperOptions:n})}return e}}};var v=function(e,t,n,o,r,i,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var p,u="function"==typeof n?n.options:n;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),o&&(u._scopeId=o),i?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=p):t&&(p=s?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),p)if(u.functional){var d=u.render;u.render=function(e,t){return p.call(t),d(e,t)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,p):[p]}return n},g="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var m=document.head||document.getElementsByTagName("head")[0],y={};var w=function(e){return function(e,t){return function(e,t){var n=g?t.media||"default":e,o=y[n]||(y[n]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);var r=t.source;if(t.map&&(r+="\n/*# sourceURL="+t.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",t.media&&o.element.setAttribute("media",t.media),m.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(r),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{var i=o.ids.size-1,s=document.createTextNode(r),a=o.element.childNodes;a[i]&&o.element.removeChild(a[i]),a.length?o.element.insertBefore(s,a[i]):o.element.appendChild(s)}}}(e,t)}},b=h,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"select",rawName:"v-select"}],ref:"selectWrapper",staticClass:"el-word-select",on:{vselectchange:e.maybeHidePoppper,vdown:e.handlePointerDown,vmove:e.handlePointerMove,vup:e.handlePointerUp}},[e._t("default"),e._v(" "),e.showHandle?n("el-popover",e._b({ref:"handle",attrs:{trigger:"manual",value:e.isSelected}},"el-popover",e.mergedHandlePopoverOptions,!1),[e._t("selection-handle"),e._v(" "),n("div",{staticClass:"selection-ref",style:e.popperStyle,attrs:{slot:"reference"},slot:"reference"})],2):e._e(),e._v(" "),e.showSuggest?n("el-popover",e._b({ref:"suggest",attrs:{trigger:"manual",value:e.isSelected}},"el-popover",e.mergedSuggestPopoverOptions,!1),[e._t("suggestion"),e._v(" "),n("div",{staticClass:"selection-ref",style:e.popperStyle,attrs:{slot:"reference"},slot:"reference"})],2):e._e()],2)};O._withStripped=!0;var C=v({render:O,staticRenderFns:[]},function(e){e&&e("data-v-09a3be51_0",{source:".el-word-select .selection-ref {\n  position: absolute;\n  visibility: hidden;\n  pointer-events: none;\n}\n.el-word-select > * {\n  user-select: text;\n}\n.el-word-select-popper {\n  padding: 0;\n  min-width: auto;\n}\n",map:{version:3,sources:["el-word-select.vue"],names:[],mappings:"AAAA;EACE,kBAAkB;EAClB,kBAAkB;EAClB,oBAAoB;AACtB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,UAAU;EACV,eAAe;AACjB",file:"el-word-select.vue",sourcesContent:[".el-word-select .selection-ref {\n  position: absolute;\n  visibility: hidden;\n  pointer-events: none;\n}\n.el-word-select > * {\n  user-select: text;\n}\n.el-word-select-popper {\n  padding: 0;\n  min-width: auto;\n}\n"]},media:void 0})},b,void 0,!1,void 0,w,void 0);C.install=function(e){e.component(C.name,C)};var P=null;return"undefined"!=typeof window?P=window.Vue:"undefined"!=typeof global&&(P=global.Vue),P&&P.use(C),e.default=C,e}({},_slicedToArray,_defineProperty,_typeof);
